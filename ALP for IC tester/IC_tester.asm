#MAKE_BIN#

#LOAD_SEGMENT=0FFFFH#		;;START ADDRESS
#LOAD_OFFSET=0000H#

#CS=0000H#	;;INITIALISATIONS
#IP=0000H#

#DS=0000H#
#ES=0000H#

#SS=0000H#
#SP=0FFFEH#

#AX=0000H#
#BX=0000H#
#CX=0000H#
#DX=0000H#
#SI=0000H#
#DI=0000H#
#BP=0000H#

; ADD YOUR CODE HERE												;;EQUIVALENT TO .CODE GOING TO BE STORED IN ROM
JMP     ST1
DB     1021 DUP(0)
; KB TABLE
TABLE_K     DB        0EEH,0EDH,0EBH,0E7H,0DEH,0DDH
DB     0DBH,0D7H,0BEH,0BDH,0BBH,0B7H
DB     07EH,07DH,07BH,077H

;DISPLAY TABLE
TABLE_D  DB     3FH,  06H, 5BH,  4FH, 66H, 6DH
DB      7DH,  27H, 7FH, 6FH, 77H, 7CH,
DB        39H,  5EH, 79H, 71H
;IC NAMES
ICNAME 7 DUP ('$')
AND1 DB 7,4,0,8
XNOR1 DB 7,4,7,2,6,6
NAND1 DB 7,4,0,0
OR1 DB 7,4,3,2
XOR1 DB 7,4,8,6
;MAIN PROGRAM

ST1:      CLI
; INTIALIZE DS, ES,SS TO START OF RAM
MOV       AX,0200H
MOV       DS,AX
MOV       ES,AX
MOV       SS,AX
MOV       SP,0FFFEH

PORTA1 EQU 00H
PORTB1 EQU 02H
PORTC1 EQU 04H
CREG1 EQU 06H

PORTA2 EQU 08H
PORTB2 EQU 0AH
PORTC2 EQU 0CH
CREG2 EQU 0EH

PORTA3 EQU 10H
PORTB3 EQU 12H
PORTC3 EQU 14H
CREG3 EQU 16H
LEA SI,ICNAME

MOV		AL,10001000B 				;CONSIDERING 00 AS THE STARTING ADDRESS FOR THE FIRST 8255
OUT     CREG1,AL
MOV     AL,10000000B
OUT     CREG2,AL
MOV 	AL,10001001B
OUT 	CREG3,AL
 
MOV AL,11111111B
OUT PORTA1,AL
MOV AL,11111111B
OUT PORTB1,AL 
MOV AL,11111111B
OUT PORTA2,AL
MOV AL,11111111B
OUT PORTB2,AL 
MOV AL,11111111B
OUT PORTA3,AL
MOV AL,11111111B
OUT PORTB3,AL 

X0:       
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


X1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     X1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

X2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    X2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    X2

MOV   AL,0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   X3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   X3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   X3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    X2

X3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H        
                    


X4:                        ;DISPLAY
CMP   AL,CS:TABLE_K[DI]
JZ    X5
INC   DI
LOOP  X4
X5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTB1,AL      

NOT AL
MOV CS:[SI],DI
CMP AL,00H
JZ X0 
                   


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SECOND DISPLAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       
XS0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


XS1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     XS1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

XS2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XS2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XS2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XS3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XS3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XS3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XS2

XS3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H 

CMP AL,7EH
JNE XS4
MOV AL,0FFH
OUT PORTB1,AL
JMP X0


XS4:
CMP   AL,CS:TABLE_K[DI]
JZ    XS5
INC   DI
LOOP  XS4
XS5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTA1,AL      
INC SI
MOV CS:[SI],DI
NOT AL

CMP AL,00H
              
JZ XS0                               
          
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;          
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;THIRD DISPLAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;          
          
XT0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


XT1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     XT1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

XT2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XT2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XT2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XT3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XT3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XT3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XT2

XT3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H

CMP AL,7EH
JNE XT4
MOV AL,0FFH
OUT PORTA1,AL
JMP XS0

XT4:
CMP   AL,CS:TABLE_K[DI]
JZ    XT5
INC   DI
LOOP  XT4
XT5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTA2,AL 
INC SI
MOV CS:[SI],DI
NOT AL

CMP AL,00H
              
JZ XT0                          
            
            
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                                 ;FOURTH DISPLAY;
        
        
XF0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


XF1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     XF1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

XF2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XF2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XF2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XF3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XF3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XF3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XF2

XF3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H 




CMP AL,7EH
JNE XF6
MOV AL,0FFH
OUT PORTA2,AL
JMP XT0

XF6:
CMP AL,7DH
JNE XF4
JE  KTEST


XF4:
CMP   AL,CS:TABLE_K[DI]
JZ    XF5
INC   DI
LOOP  XF4
XF5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTB2,AL     
INC SI
MOV CS:[SI],DI

NOT AL

CMP AL,00H                                          
                                       
              
JZ XF0                          
               
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;              
                                   ;FIFTH DISPLAY;
         
XK0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


XK1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     XK1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

XK2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XK2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XK2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XK3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XK3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   XK3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    XK2

XK3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H 

CMP AL,7EH
JNE XK6
MOV AL,0FFH
OUT PORTB2,AL
JMP XF0
    
 XK6:
CMP AL,7DH
JNE XK4
JE  KTEST
    
XK4:
CMP   AL,CS:TABLE_K[DI]
JZ    XK5
INC   DI
LOOP  XK4
XK5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTB3,AL     
INC SI
MOV CS:[SI],DI

NOT AL

CMP AL,00H                                          
                                       
              
JZ XK0 
                
      
         
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                           ;SIXTH DISPLAY

           
L0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


L1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     L1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

L2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    L2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    L2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   L3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   L3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   L3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    L2

L3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H

CMP AL,7EH
JNE L6
MOV AL,0FFH
OUT PORTB3,AL
JMP XK0

L6:
CMP AL,7DH
JNE L4
JE KTEST

L4:
CMP   AL,CS:TABLE_K[DI]
JZ    L5
INC   DI
LOOP  L4
L5:   
LEA   BX, TABLE_D
MOV   AL, CS:[BX+DI]
NOT   AL
OUT   PORTA3,AL    
INC SI
MOV CS:[SI],DI

NOT AL

CMP AL,00H   
              
JZ L0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                           ;SEVENTH DISPLAY

           
LL0:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


LL1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     LL1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

LL2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    LL2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    LL2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   LL3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   LL3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   LL3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    LL2

LL3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H

CMP AL,7EH				;BACKSPACE
JNE LL6
MOV AL,0FFH
OUT PORTA3,AL
JMP L0

LL6:
CMP AL,7DH
JE KTEST

     

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;TEST KEY PRESS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
KTEST:
MOV    AL,00H			;KEYBOARD 
OUT    PORTC1,AL


KT1:       				;KEYCHK
IN  	AL,PORTC1
AND		AL,0F0H
CMP     AL,0F0H
JNZ     KT1
CALL    D20MS


MOV   AL,00H		;AGAIN CHECKING FOR KEYBOARD
OUT   PORTC1,AL

KT2:        
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    KT2
CALL  D20MS

MOV   AL,00H
OUT   PORTC1,AL
IN    AL, PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    KT2

MOV   AL, 0EH 			;CHECK FOR FIRST COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   KT3

MOV   AL, 0DH			;CHECK FOR SECOND COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   KT3

MOV   AL, 0BH			;CHECK FOR THIRD COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JNZ   KT3

MOV   AL, 07H			;CHECK FOR FOURTH COLUMN KEY PRESS
MOV   BL,AL
OUT   PORTC1,AL
IN    AL,PORTC1
AND   AL,0F0H
CMP   AL,0F0H
JZ    KT2

KT3:         			;DECODING KEY PRESS
OR    AL,BL
MOV   CX,0FH
MOV   DI,00H

CMP AL,7BH
JE IDLOGIC                
JMP KTEST
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
;AND1 7,4,0,8
;XNOR 7,4,7,2,6,6
;NAND 7,4,0,0
;OR1 7,4,3,2
;XOR1 7,4,8,6
IDLOGIC:
	MOV CX,4                 ; COMPARE FIRST 4 CHARACTERS WITH NAND
	LEA SI,ICNAME
	LEA DI,NAND1
	CLD
P1:	MOV BL,CS:[SI]
	CMP BL,CS:[DI]
	JE NAND2
	INC SI
	INC DI
	JNE P2
	LOOP P1
	JMP NAND2

P2:	MOV CX,4                 ; COMPARE FIRST 4 CHARACTERS WITH AND
	LEA SI,ICNAME
	LEA DI,AND1
	CLD
P3:	MOV BL,CS:[SI]
	CMP BL,CS:[DI]
	INC SI
	INC DI
	JNE P4
	LOOP P3
	JMP AND2

P4: MOV CX,4                 ; COMPARE FIRST 4 CHARACTERS WITH OR
	LEA SI,ICNAME
	LEA DI,OR1
	CLD
P5:	MOV BL,CS:[SI]
	CMP BL,CS:[DI]
	INC SI
	INC DI
	JNE P6
	LOOP P5
	JMP OR2
                                                                                                                        
P8: MOV CX,6                 ; COMPARE FIRST 6 CHARACTERS WITH XNOR1
	LEA SI,ICNAME
	LEA DI,XNOR1
	CLD
P9:	MOV BL,CS:[SI]
	CMP BL,CS:[DI]
	INC SI
	INC DI
	JNE FAIL
	LOOP P9
	JMP XNOR2			;CHECKS WHICH IC TO TEST 

P6: MOV CX,4                 ; COMPARE FIRST 4 CHARACTERS WITH XOR1
	LEA SI,ICNAME
	LEA DI,XOR1
	CLD
P7:	MOV BL,CS:[SI]
	CMP BL,CS:[DI]
	INC SI
	INC DI
	JNE P8
	LOOP P7
	JMP XOR2	             ;CHECKS WHICH IC TO TEST
      
 

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC TESTING;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
XNOR2:
MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL		
JE PASS

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
NAND2:

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL		
JE PASS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
AND2:

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL		
JE PASS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
OR2:
MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL		
JE PASS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
XOR2:
MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL

MOV AL,00000000B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000100B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001000B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001100B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000010B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000110B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001010B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001110B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,11110000B
JNE FAIL

MOV AL,00000001B
OUT CREG2,AL        
MOV AL,00000011B
OUT CREG2,AL
MOV AL,00000101B
OUT CREG2,AL
MOV AL,00000111B
OUT CREG2,AL
MOV AL,00001001B
OUT CREG2,AL
MOV AL,00001011B
OUT CREG2,AL
MOV AL,00001101B
OUT CREG2,AL
MOV AL,00001111B
OUT CREG2,AL
IN AL,PORTC3
AND AL,0F0H
CMP AL,00000000B
JNE FAIL		
JE PASS



PASS:
MOV		AL,10001000B 				;CONSIDERING 00 AS THE STARTING ADDRESS FOR THE FIRST 8255
OUT     CREG1,AL
MOV     AL,10000000B
OUT     CREG2,AL
MOV 	AL,10001001B
OUT 	CREG3,AL
PASS1: 
MOV AL,73H
NOT AL
OUT PORTB1,AL
MOV AL,77H
NOT AL
OUT PORTA1,AL
MOV AL,6DH 
NOT AL
OUT PORTA2,AL
MOV AL,6DH 
NOT AL
OUT PORTB2,AL
MOV AL,11111111B
OUT PORTA3,AL
MOV AL,11111111B
OUT PORTB3,AL  
JMP PASS1

FAIL:
MOV		AL,10001000B 				;CONSIDERING 00 AS THE STARTING ADDRESS FOR THE FIRST 8255
OUT     CREG1,AL
MOV     AL,10000000B
OUT     CREG2,AL
MOV 	AL,10001001B
OUT 	CREG3,AL
FAIL1: 
MOV AL,71H
NOT AL
OUT PORTB1,AL
MOV AL,77H
NOT AL
OUT PORTA1,AL
MOV AL,06H 
NOT AL
OUT PORTA2,AL
MOV AL,38H 
NOT AL
OUT PORTB2,AL
MOV AL,11111111B
OUT PORTA3,AL
MOV AL,11111111B
OUT PORTB3,AL
JMP FAIL1

D20MS:
MOV  CX,2220 ; DELAY GENERATED WILL BE APPROX 0.45 SECS
XN:  LOOP  XN
RET